import {
    Slider,
    VerticalBox,
    HorizontalBox,
    GroupBox,
    Button,
    CheckBox,
    Switch,
    LineEdit,
    GridBox,
} from "std-widgets.slint";
import { CameraFeed, TargetStencil } from "CameraFeed.slint";
import {
    HitManager,
    HitManagerState,
    HitInfo,
    HitProcessResult,
    TargetInfo,
} from "HitManager.slint";

export { TargetStencil, HitManagerState, HitInfo, HitProcessResult, TargetInfo }

export component MainWindow inherits Window {
    title: "Camera";
    preferred-width: 900px;
    preferred-height: 600px;

    in-out property <image> camera-frame;
    in-out property <image> target-frame;
    in property <bool> camera-zoom-supported;

    HorizontalBox {
        padding: 10px;
        GroupBox {
            title: "Camera";
            VerticalBox {
                HorizontalLayout {
                    alignment: center;
                    VerticalLayout {
                        alignment: center;
                        CameraFeed {
                            source: camera-frame;
                        }
                    }

                    vertical-stretch: 1;
                }

                GroupBox {
                    vertical-stretch: 0;
                    HorizontalLayout {
                        Text {
                            text: "Zoom";
                            vertical-alignment: center;
                        }

                        Slider {
                            minimum: 1;
                            maximum: 20;
                            value: 9;
                            enabled: camera-zoom-supported;
                        }
                    }
                }
            }
        }

        GroupBox {
            title: "Target";
            VerticalBox {
                Image {
                    source: target-frame;
                    image-fit: contain;
                    vertical-stretch: 1;
                }

                GroupBox {
                    vertical-stretch: 0;
                    VerticalLayout {
                        spacing: 0.4rem;
                        Button {
                            text: "Refresh";
                        }

                        HorizontalLayout {
                            alignment: start;
                            spacing: 2rem;
                            Switch {
                                text: "Auto refresh interval";
                            }

                            HorizontalLayout {
                                spacing: 0.5rem;

                                LineEdit {
                                    width: 7rem;
                                    text: 0;
                                    input-type: number;
                                }

                                Text {
                                    text: "sec";
                                    vertical-alignment: center;
                                }
                            }
                        }
                    }
                }
            }
        }

        HitManager { }
    }
}
